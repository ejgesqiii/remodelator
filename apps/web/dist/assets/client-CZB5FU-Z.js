var o=Object.defineProperty;var h=(e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var c=(e,t,s)=>h(e,typeof t!="symbol"?t+"":t,s);import{u as f}from"./index-CLC1XlwA.js";const m="http://localhost:8000";class p extends Error{constructor(s,r){var a,u;const n=((a=r==null?void 0:r.error)==null?void 0:a.message)||(r==null?void 0:r.detail)||"An unexpected error occurred";super(n);c(this,"status");c(this,"code");c(this,"requestId");this.name="ApiError",this.status=s,this.code=((u=r==null?void 0:r.error)==null?void 0:u.code)||"unknown_error",this.requestId=r==null?void 0:r.request_id}}async function i(e,t){const s=f.getState().token,r={"Content-Type":"application/json",...s?{"x-session-token":s}:{},...t==null?void 0:t.headers},n=await fetch(`${m}${e}`,{...t,headers:r});if(!n.ok){const u=await n.json().catch(()=>({detail:n.statusText}));throw new p(n.status,u)}const a=await n.text();return a?JSON.parse(a):{}}function l(e){return i(e,{method:"GET"})}function x(e,t){return i(e,{method:"POST",body:t!==void 0?JSON.stringify(t):void 0})}function S(e,t){return i(e,{method:"PUT",body:t!==void 0?JSON.stringify(t):void 0})}function w(e){return i(e,{method:"DELETE"})}export{S as a,w as d,l as g,x as p};
