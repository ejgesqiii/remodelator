import{b as l,j as e}from"./query-BVapmMUr.js";import{P as b}from"./PageHeader-o_TcEL5P.js";import{S as h,a as o}from"./LoadingSkeleton-QY-c1bum.js";import{S as f}from"./StatusBadge-DqFGVLZ6.js";import{M as j}from"./MoneyDisplay-DJnLbf4O.js";import{E as v,f as y}from"./EmptyState-CZ0oPKrL.js";import{l as N}from"./estimates-D7lOcU5t.js";import{g as w}from"./billing-BefLsq4a.js";import{g as k}from"./llm-DZNYVEJB.js";import{L as C,C as m,k as L,P as c,b as x,g as E,l as p,A as S}from"./ui-D1pQdlX7.js";import{L as a}from"./react-DJjQTIQO.js";import"./cn-C8nBGPD0.js";import"./client-Bw5oB_ZD.js";import"./index-D_Pr5PJx.js";import"./state-BAZDGeK2.js";function U(){const{data:i=[],isLoading:n}=l({queryKey:["estimates"],queryFn:N}),{data:r}=l({queryKey:["billing-subscription"],queryFn:w}),{data:t}=l({queryKey:["llm-status"],queryFn:k,staleTime:6e4}),d=i.slice(0,5),g=i.filter(s=>s.status==="in_progress"||s.status==="draft").length,u=i.filter(s=>s.status==="completed").length;return e.jsxs("div",{className:"space-y-8",children:[e.jsx(b,{title:"Dashboard",description:"Your remodeling business at a glance",icon:C}),n?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(s=>e.jsx(h,{},s))}):e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(o,{label:"Total Estimates",value:i.length,icon:m}),e.jsx(o,{label:"Active",value:g,icon:L}),e.jsx(o,{label:"Completed",value:u,icon:c}),e.jsx(o,{label:"Subscription",value:r!=null&&r.active?"Active":"Inactive",icon:x})]}),((t==null?void 0:t.blocker_reason)||r&&!r.active)&&e.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-warning/30 bg-warning-muted px-4 py-3 text-sm",children:[e.jsx(E,{size:18,className:"mt-0.5 shrink-0 text-warning"}),e.jsxs("div",{className:"space-y-1",children:[(t==null?void 0:t.blocker_reason)&&e.jsxs("p",{className:"text-warning",children:["LLM: ",t.blocker_reason]}),r&&!r.active&&e.jsxs("p",{className:"text-warning",children:["Subscription: ",r.status]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-border bg-surface/80 p-6 backdrop-blur-sm",children:[e.jsx("h2",{className:"mb-4 font-heading text-base font-semibold",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{to:"/estimates",className:"flex items-center gap-3 rounded-xl bg-primary px-4 py-3 text-sm font-semibold text-primary-foreground shadow-lg shadow-primary/20 transition-all hover:bg-primary-hover hover:shadow-xl",children:[e.jsx(p,{size:18})," New Estimate"]}),e.jsxs(a,{to:"/catalog",className:"flex items-center gap-3 rounded-xl border border-border bg-surface-hover px-4 py-3 text-sm font-medium text-foreground shadow-none transition-colors hover:bg-surface-active",children:[e.jsx(c,{size:18,className:"text-muted"})," Browse Catalog"]}),e.jsxs(a,{to:"/billing",className:"flex items-center gap-3 rounded-xl border border-border bg-surface-hover px-4 py-3 text-sm font-medium text-foreground shadow-none transition-colors hover:bg-surface-active",children:[e.jsx(x,{size:18,className:"text-muted"})," Billing & Usage"]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-border bg-surface/80 p-6 backdrop-blur-sm lg:col-span-2",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"font-heading text-base font-semibold",children:"Recent Estimates"}),e.jsxs(a,{to:"/estimates",className:"flex items-center gap-1 text-xs font-medium text-primary hover:underline",children:["View All ",e.jsx(S,{size:14})]})]}),n?e.jsx("div",{className:"space-y-2",children:[1,2,3].map(s=>e.jsx("div",{className:"animate-skeleton h-16 rounded-xl bg-border"},s))}):d.length===0?e.jsx(v,{icon:m,title:"No estimates yet",description:"Create your first estimate to get started",action:e.jsxs(a,{to:"/estimates",className:"flex items-center gap-2 rounded-xl bg-primary px-4 py-2.5 text-sm font-semibold text-primary-foreground shadow-md hover:bg-primary-hover",children:[e.jsx(p,{size:16})," Create Estimate"]})}):e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsxs(a,{to:`/estimates/${s.id}`,className:"group flex items-center justify-between rounded-xl border border-border bg-background/50 px-4 py-3 transition-all hover:border-primary/20 hover:bg-surface-hover",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-medium group-hover:text-primary",children:s.title}),e.jsxs("p",{className:"mt-0.5 text-xs text-muted-foreground",children:[s.customer_name||"No customer"," Â· ",y(s.updated_at)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{value:s.total,size:"sm"}),e.jsx(f,{status:s.status})]})]},s.id))})]})]})]})}export{U as DashboardPage};
