import{j as e}from"./query-BVapmMUr.js";import{c as r}from"./cn-C8nBGPD0.js";import{c as u}from"./state-B9IHhQuw.js";import{u as c}from"./index-CLC1XlwA.js";import{L as h,C as f,P as g,F as b,b as j,S as v,c as N,d as y,e as k,U as C,f as S}from"./ui--RxPHpVv.js";import{u as m,f as d,O as w}from"./react-DJjQTIQO.js";import{u as z}from"./useAuth-2ixeYPs8.js";import"./client-CZB5FU-Z.js";const n=u()(s=>({sidebarCollapsed:!1,toggleSidebar:()=>s(a=>({sidebarCollapsed:!a.sidebarCollapsed})),setSidebarCollapsed:a=>s({sidebarCollapsed:a})})),L=[{to:"/",label:"Dashboard",icon:h},{to:"/estimates",label:"Estimates",icon:f},{to:"/catalog",label:"Catalog",icon:g},{to:"/templates",label:"Templates",icon:b},{to:"/billing",label:"Billing",icon:j},{to:"/settings",label:"Settings",icon:v}];function A(){const s=n(t=>t.sidebarCollapsed),a=n(t=>t.toggleSidebar),o=c(t=>t.role),i=m();return e.jsxs("aside",{className:r("fixed left-0 top-0 z-40 h-screen border-r border-border bg-surface/80 backdrop-blur-xl","flex flex-col transition-all duration-200 ease-in-out",s?"w-[72px]":"w-[260px]"),children:[e.jsxs("div",{className:r("flex items-center border-b border-border px-4",s?"h-16 justify-center":"h-16 gap-3"),children:[e.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-primary text-primary-foreground font-heading font-bold text-sm",children:"R"}),!s&&e.jsx("span",{className:"font-heading font-semibold text-lg tracking-tight",children:"Remodelator"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:e.jsxs("ul",{className:"space-y-1",children:[L.map(({to:t,label:x,icon:p})=>{const l=t==="/"?i.pathname==="/":i.pathname.startsWith(t);return e.jsx("li",{children:e.jsxs(d,{to:t,className:r("group flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-150",l?"bg-primary/10 text-primary shadow-sm":"text-muted-foreground hover:bg-surface-hover hover:text-foreground"),children:[e.jsx(p,{size:20,className:r("shrink-0 transition-colors",l?"text-primary":"text-muted group-hover:text-foreground")}),!s&&e.jsx("span",{children:x})]})},t)}),o==="admin"&&e.jsx("li",{children:e.jsxs(d,{to:"/admin",className:r("group flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-150",i.pathname.startsWith("/admin")?"bg-primary/10 text-primary shadow-sm":"text-muted-foreground hover:bg-surface-hover hover:text-foreground"),children:[e.jsx(N,{size:20,className:r("shrink-0 transition-colors",i.pathname.startsWith("/admin")?"text-primary":"text-muted group-hover:text-foreground")}),!s&&e.jsx("span",{children:"Admin"})]})})]})}),e.jsx("div",{className:"border-t border-border px-3 py-3",children:e.jsx("button",{onClick:a,className:r("flex w-full items-center justify-center rounded-lg p-2 text-muted transition-colors hover:bg-surface-hover hover:text-foreground"),"aria-label":s?"Expand sidebar":"Collapse sidebar",children:s?e.jsx(y,{size:20}):e.jsx(k,{size:20})})})]})}function P(){const s=c(o=>o.email),{logout:a}=z();return e.jsxs("header",{className:"sticky top-0 z-30 flex h-16 items-center justify-between border-b border-border bg-surface/60 px-6 backdrop-blur-xl",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"font-heading text-lg font-semibold tracking-tight text-foreground"})}),e.jsx("div",{className:"flex items-center gap-4",children:s&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-surface-hover px-3 py-1.5",children:[e.jsx(C,{size:16,className:"text-muted"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:s})]}),e.jsxs("button",{onClick:a,className:"flex items-center gap-2 rounded-lg bg-transparent px-3 py-1.5 text-sm font-medium text-muted-foreground shadow-none transition-colors hover:bg-destructive/10 hover:text-destructive","aria-label":"Sign out",children:[e.jsx(S,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Sign out"})]})]})})]})}function H(){const s=n(o=>o.sidebarCollapsed),a=m();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("a",{href:"#main-content",className:"skip-to-content",children:"Skip to content"}),e.jsx(A,{}),e.jsxs("div",{className:r("flex min-h-screen flex-col transition-all duration-200",s?"ml-[72px]":"ml-[260px]"),children:[e.jsx(P,{}),e.jsx("main",{id:"main-content",className:"flex-1 p-6",role:"main",children:e.jsx("div",{className:"animate-fade-in",children:e.jsx(w,{})},a.pathname)})]})]})}export{H as AppShell};
