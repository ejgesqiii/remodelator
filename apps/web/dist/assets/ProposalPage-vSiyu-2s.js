import{b as d,j as e}from"./query-BVapmMUr.js";import{P as i}from"./PageHeader-o_TcEL5P.js";import{p as l,g as p}from"./client-Bw5oB_ZD.js";import{r as c,I as m,D as x,t as a}from"./ui-D1pQdlX7.js";import{h as u,L as g}from"./react-DJjQTIQO.js";import"./index-D_Pr5PJx.js";import"./state-BAZDGeK2.js";function h(r){return p(`/proposals/${r}/render`)}function f(r){return l(`/proposals/${r}/pdf`)}function _(){const{id:r}=u(),{data:o,isLoading:t}=d({queryKey:["proposal",r],queryFn:()=>h(r),enabled:!!r}),n=async()=>{try{const s=await f(r);a.success(`PDF generated: ${s.path}`)}catch(s){a.error(s instanceof Error?s.message:"PDF generation failed")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{to:`/estimates/${r}`,className:"rounded-lg p-2 text-muted transition-colors hover:bg-surface-hover hover:text-foreground",children:e.jsx(c,{size:20})}),e.jsx(i,{title:"Proposal",icon:m,actions:e.jsxs("button",{onClick:n,className:"flex items-center gap-2 rounded-xl bg-primary px-4 py-2.5 text-sm font-semibold text-primary-foreground shadow-lg shadow-primary/20 transition-all hover:bg-primary-hover",children:[e.jsx(x,{size:16})," Export PDF"]})})]}),e.jsx("div",{className:"rounded-2xl border border-border bg-surface/80 p-8 backdrop-blur-sm",children:t?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"animate-skeleton h-5 rounded bg-border",style:{width:`${70+s*5}%`}},s))}):o!=null&&o.rendered?e.jsx("div",{className:"prose prose-invert max-w-none text-foreground [&_p]:leading-relaxed [&_h1]:font-heading [&_h2]:font-heading [&_h3]:font-heading",dangerouslySetInnerHTML:{__html:o.rendered}}):e.jsx("p",{className:"text-center text-muted-foreground",children:"No proposal content available"})})]})}export{_ as ProposalPage};
