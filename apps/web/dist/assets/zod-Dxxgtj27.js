import{a as l,b as h,p,c as y,$ as g,d as m}from"./forms-BaqsNbdS.js";function v(o,i){try{var n=o()}catch(e){return i(e)}return n&&n.then?n.then(void 0,i):n}function E(o,i){for(var n={};o.length;){var e=o[0],a=e.code,s=e.message,r=e.path.join(".");if(!n[r])if("unionErrors"in e){var t=e.unionErrors[0].errors[0];n[r]={message:t.message,type:t.code}}else n[r]={message:s,type:a};if("unionErrors"in e&&e.unionErrors.forEach(function(f){return f.errors.forEach(function(d){return o.push(d)})}),i){var u=n[r].types,c=u&&u[e.code];n[r]=m(r,i,n,a,c?[].concat(c,e.message):e.message)}o.shift()}return n}function j(o,i){for(var n={};o.length;){var e=o[0],a=e.code,s=e.message,r=e.path.join(".");if(!n[r])if(e.code==="invalid_union"&&e.errors.length>0){var t=e.errors[0][0];n[r]={message:t.message,type:t.code}}else n[r]={message:s,type:a};if(e.code==="invalid_union"&&e.errors.forEach(function(f){return f.forEach(function(d){return o.push(d)})}),i){var u=n[r].types,c=u&&u[e.code];n[r]=m(r,i,n,a,c?[].concat(c,e.message):e.message)}o.shift()}return n}function w(o,i,n){if(n===void 0&&(n={}),(function(e){return"_def"in e&&typeof e._def=="object"&&"typeName"in e._def})(o))return function(e,a,s){try{return Promise.resolve(v(function(){return Promise.resolve(o[n.mode==="sync"?"parse":"parseAsync"](e,i)).then(function(r){return s.shouldUseNativeValidation&&l({},s),{errors:{},values:n.raw?Object.assign({},e):r}})},function(r){if((function(t){return Array.isArray(t==null?void 0:t.issues)})(r))return{values:{},errors:h(E(r.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw r}))}catch(r){return Promise.reject(r)}};if((function(e){return"_zod"in e&&typeof e._zod=="object"})(o))return function(e,a,s){try{return Promise.resolve(v(function(){return Promise.resolve((n.mode==="sync"?p:y)(o,e,i)).then(function(r){return s.shouldUseNativeValidation&&l({},s),{errors:{},values:n.raw?Object.assign({},e):r}})},function(r){if((function(t){return t instanceof g})(r))return{values:{},errors:h(j(r.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw r}))}catch(r){return Promise.reject(r)}};throw new Error("Invalid input: not a Zod schema")}export{w as a};
