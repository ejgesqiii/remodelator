import{g as p,r as f}from"./react-DJjQTIQO.js";import{u as r}from"./query-BVapmMUr.js";import{u as h}from"./index-CLC1XlwA.js";import{p as s}from"./client-CZB5FU-Z.js";function A(t){return s("/auth/login",t)}function M(t){return s("/auth/register",t)}function x(){const t=p(),{setAuth:e,clearAuth:n,token:u,email:i,role:a,userId:c}=h(),g=r({mutationFn:o=>A(o),onSuccess:o=>{e(o),t("/")}}),l=r({mutationFn:o=>M(o),onSuccess:o=>{e(o),t("/")}}),m=f.useCallback(()=>{n(),t("/login")},[n,t]);return{isAuthenticated:!!u,user:u?{userId:c,email:i,role:a}:null,login:g,register:l,logout:m}}export{x as u};
