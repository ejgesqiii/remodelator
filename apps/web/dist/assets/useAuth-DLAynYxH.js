import{g as p,r as h}from"./react-DJjQTIQO.js";import{u as s}from"./query-BVapmMUr.js";import{u as f}from"./index-D_Pr5PJx.js";import{p as i,u as d}from"./client-Bw5oB_ZD.js";function S(e){return i("/auth/login",e)}function M(e){return i("/auth/register",e)}function F(){const e=p(),{setAuth:n,clearAuth:u,token:r,email:a,role:c,userId:l}=f(),o=d(t=>t.clearAdminApiKey),m=s({mutationFn:t=>S(t),onSuccess:t=>{n(t),o(),e("/")}}),g=s({mutationFn:t=>M(t),onSuccess:t=>{n(t),o(),e("/")}}),A=h.useCallback(()=>{u(),o(),e("/login")},[o,u,e]);return{isAuthenticated:!!r,user:r?{userId:l,email:a,role:c}:null,login:m,register:g,logout:A}}export{F as u};
